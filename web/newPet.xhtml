<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
          
    <h:body>
        <ui:composition template="template.xhtml">
            
            <ui:define name="head">
                <title>Add Animal</title>
            </ui:define>
                
            <ui:define name="body">
                <h:outputStylesheet name="bootstrap-4.0.0-alpha.6-dist/css/bootstrap.css"/>
                <style>
                    #customerinfo .has-error .control-label,
                    #customerinfo .has-error .help-block,
                    #customerinfo .has-error .form-control-feedback {
                        color: red;
                    }
                </style>

                <b:container>
                    <h2>Add New Pet</h2>
                    <b:well>
                        <b:form enctype="multipart/form-data"
                                id="animalinfo">
                            <!-- Name -->
                            <b:inputText value="#{form.animalName}"
                                         class='form-control'
                                         required ="true"
                                         label="Name"
                                         requiredMessage="Your must enter Animal's Name"
                                         id="inputName"/>
                            <!-- Species and Sex are one row -->
                            <b:row>
                                <!-- Species -->
                                <b:column col-md="4"
                                          col-xs="6">
                                    <b:selectOneMenu value='#{form.animalSpecies}'
                                                     required="true"
                                                     label="Species"
                                                     style="height: 3em;"
                                                     id='inputSpecies'>
                                        <f:selectItem itemValue="cat"
                                                      class="form-check-label"
                                                      itemLabel="cat"/>
                                        <f:selectItem itemValue="dog"
                                                      class="form-check-label"
                                                      itemLabel="dog"/>
                                    </b:selectOneMenu>
                                </b:column>
                                <!-- Sex -->
                                <b:column col-md="4"
                                          col-xs="6">
                                    <b:selectOneMenu value='#{form.animalSex}'
                                                     required="true"
                                                     label="Sex"
                                                     style="height:3em;"
                                                     id='inputSex'>
                                        <f:selectItem itemValue="male"
                                                      class="form-check-label"
                                                      itemLabel="male"/>
                                        <f:selectItem itemValue="female"
                                                      class="form-check-label"
                                                      itemLabel="female"/>
                                    </b:selectOneMenu>
                                </b:column>
                                <!-- Weight -->
                                <b:column col-md="4"
                                          col-xs="6">
                                    <b:inputText value='#{form.animalWeight}'
                                                 id='inputWeight'
                                                 required="true"
                                                 update="@this"
                                                 requiredMessage="Weight required"
                                                 label="Weight"
                                                 validatorMessage="Weight must be between 0 and 200 lbs"
                                                 class='form-control'>
                                        <f:validateLongRange minimum="0"
                                                             maximum="200"/>
                                    </b:inputText>
                                </b:column>
                            </b:row>
                            <!-- Age -->
                            <b:row>
                                <b:column col-md="4" col-xs="6">
                                    <b:inputText value='#{form.animalAgeY}'
                                                 id='inputAgeY'
                                                 required="true"
                                                 requiredMessage="Age Years required"
                                                 update="@this"
                                                 validatorMessage="Age Years must be 0 - 100"
                                                 label="Age Years"
                                                 class='form-control'>
                                        <f:validateLongRange minimum="0"
                                                             maximum="100"/>
                                    </b:inputText>
                                </b:column>
                                <b:column col-md="4" col-xs="6">
                                    <b:inputText value='#{form.animalAgeM}'
                                                 id='inputAgeM'
                                                 required="true"
                                                 requiredMessage="Age Months Required"
                                                 label="Age Months"
                                                 update="@this"
                                                 validatorMessage="Age Months must be 0 - 11"
                                                 class='form-control'>
                                        <f:validateLongRange minimum="0"
                                                             maximum="11"/>
                                                         
                                    </b:inputText>
                                </b:column>
                                <b:column col-md="4" col-xs="6">
                                    <b:inputText value='#{form.animalAgeW}'
                                                 id='inputAgeW'
                                                 required="true"
                                                 requiredMessage="Age Weeks Required"
                                                 validatorMessage="Age Weeks must be 0 - 4"
                                                 label="Age Weeks"
                                                 update="@this"
                                                 class='form-control'>
                                        <f:validateLongRange minimum="0"
                                                             maximum="4"/>
                                    </b:inputText>
                                </b:column>
                            </b:row>
                            <!-- Color -->
                            <b:row>
                                <b:column col-xs="6">
                                    <b:inputText value='#{form.animalColor}'
                                                 id='inputColor'
                                                 required="true"
                                                 requiredMessage="Color requried"
                                                 label="Color"
                                                 class='form-control'/>
                                </b:column>
                                <!-- Energy Level -->
                                <b:column col-xs="6">
                                    <b:touchSpin value="#{form.animalEnergyLevel}"
                                                 id="inputEnergyLevel"
                                                 required="true"
                                                 requiredMessage="Energy Level Required"
                                                 label="Energy Level"
                                                 min="0"
                                                 max="10"/>
                                </b:column>
                            </b:row>
                            <!-- Food Type -->
                            <b:inputText value="#{form.animalFoodType}"
                                         id="inputFoodType"
                                         required="true"
                                         requiredMessage="Food Type required"
                                         label="Food Type"
                                         class="form-control"/>
                            <!-- Description -->
                            <b:inputTextarea value='#{form.animalDesc}'
                                             id='inputDesc'
                                             required="true"
                                             requiredMessage="Description required"
                                             label="Description"
                                             class='form-control'/>
                            <!-- Breeds -->
                            <b:row>
                                <b:column col-md="6">
                                    <b:inputText value="#{form.animalBreeds}"
                                                 id="inputBreeds"
                                                 required="true"
                                                 typeahead="true"
                                                 typeahead-values="#{form.breedValues()}"
                                                 placeholder="Press enter to add more"
                                                 requiredMessage="Breeds required"
                                                 label="Breeds"
                                                 class="tags"
                                                 tags="true">
                                        <script>
                                            $('.tags').tagsinput('refresh');
                                        </script>
                                    </b:inputText>
                                </b:column>
                                <b:column col-md="6">
                                    <b:inputText value="#{form.animalTags}"
                                                 id="inputTags"
                                                 typeahead="true"
                                                 typeahead-values="#{form.tagValues()}"
                                                 label="Personality"
                                                 class="tags"
                                                 placeholder="Press enter to add more"
                                                 tags="true">
                                        <script>
                                            $('.tags').tagsinput('refresh');
                                        </script>
                                    </b:inputText>
                                </b:column>
                            </b:row>
                            <!-- Image -->
                            <label for="inputImage">Upload image</label>
                            <h:inputFile id="inputImage"
                                         value="#{form.animalImage}"
                                         class="form-control"
                                         required="true"
                                         requiredMessage="Image required"
                                         style="height:3em;"/>
                            <b:messages escape="false"/>
                            <br/>
                                             
                            <b:commandButton class="btn btn-primary"
                                             value="Submit"
                                             ajax="true"
                                             update="@form"
                                             action="#{form.submitAnimal()}"/>
                        </b:form>
                    </b:well>
                        
                    <!-- This script disables the enter key for tags
                          so that a new tag doesn't submit the form -->
                    <script>
                        $('#animalinfo').on('keyup keypress', function(e) {
                            var keyCode = e.keyCode || e.which;
                            var focusedId = ($("*:focus").attr("id"));
                            if(keyCode === 13) {
                                if(typeof focusedId === "undefined") {
                                    e.preventDefault();
                                    return false;
                                }
                            }
                        })
                    </script>
                </b:container>
                    
            </ui:define>
        </ui:composition>
    </h:body>
</html>